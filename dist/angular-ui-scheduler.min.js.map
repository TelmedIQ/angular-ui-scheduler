{"version":3,"sources":["app.js","angularUiSchedulerCtrl.js","angularUiSchedulerDirective.js","filters/schDateStrFixFilter.js","filters/schZeroPadFilter.js","services/GetRule.js","services/InRangeFactory.js","services/SetRule.js"],"names":["angular","module","constant","controller","$scope","$filter","$log","$timezones","useTimezone","InRange","GetRule","SetRule","CreateObject","scope","requireFutureST","fn","this","requireFutureStartTime","getOptions","options","startDate","schedulerUTCTime","frequency","schedulerFrequency","value","interval","schedulerInterval","schedulerEnd","occurrenceCount","schedulerOccurrenceCount","endDate","schedulerEndDt","replace","match","p1","p2","p3","weekDays","yearlyRepeatOption","month","yearlyMonth","monthDay","yearlyMonthDay","setOccurrence","yearlyOccurrence","yearlyWeekDay","yearlyOtherMonth","monthlyRepeatOption","monthlyOccurrence","monthlyWeekDay","clearErrors","scheduler_weekDays_error","scheduler_endDt_error","resetStartDate","scheduler_interval_error","scheduler_occurrenceCount_error","scheduler_monthDay_error","scheduler_yearlyMonthDay_error","scheduler_form","$setValidity","$setPristine","setDetails","rrule","getRRule","rrule_nlp_description","toText","dateChoice","occurrence_list","all","date","i","local","dt","align","schedulerTimeZone","getMonth","getDate","getFullYear","getHours","getMinutes","getSeconds","getTimezoneAbbreviation","push","utc","toISOString","toString","getValue","rule","name","schedulerName","setRRule","clear","setName","setDefaults","getUserTimezone","getLocal","setRequireFutureStartTime","opt","getRequireFutureStartTime","setShowRRule","showRRule","Init","params","schedulerShowTimeZone","current_timezone","$","isEmptyObject","error","_","find","timeZones","x","scheduleTimeChange","scheduleRepeatChange","moment","tz","scheduler_form_schedulerStartDt_error","scheduler_startTime_error","e","startDateError","resetError","variable","schedulerShowInterval","schedulerIntervalLabel","intervalLabel","endOptions","sheduler_frequency_error","setWeekday","event","day","indexOf","splice","target","blur","msg","schedulerEndChange","Date","names","frequencyOptions","occurrences","weekdays","months","schedulerStartHour","arguments","length","hours","toDate","schedulerStartMinute","minutes","schedulerStartSecond","seconds","schedulerShowEvery","schedulerIsValid","scheduler","directive","restrict","templateUrl","link","elem","attr","filter","dateStr","yy","mm","dd","hh","mi","ss","n","pad","str","Math","pow","trim","substr","factory","isDate","dtstart","message","freq","RRule","toUpperCase","byweekday","isArray","undefined","bysetpos","bymonth","bymonthday","count","until","DAILY","min","max","rx","RegExp","test","set","key","pair","k","split","toWeekDays","days","darray","toLowerCase","warray","diffA","difference","diffB","setValue","l","j","timeString","result","parseInt","contains","monhthlyRepeatOption","setStartDate","p4","p5","p6","schedulerStartDt","yearlRepeatOption","yearlyOption","isValid"],"mappings":"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","file":"angular-ui-scheduler.min.js","sourcesContent":["angular.module('angular-ui-scheduler', ['Timezones'])\n    .constant('useTimezone', false);","/**\n * @ngdoc controller\n * @name angular-ui-scheduler:angularUiSchedulerCtrl\n *\n * @description\n *\n *\n * @requires $scope\n * */\nangular.module('angular-ui-scheduler')\n    .controller('angularUiSchedulerCtrl', [\"$scope\", \"$filter\", \"$log\", \"$timezones\", \"useTimezone\", \"InRange\", \"GetRule\", \"SetRule\", function ($scope, $filter, $log, $timezones, useTimezone, InRange, GetRule, SetRule) {\n\n        //region defaults\n        $scope.frequencyOptions = [\n            {name: 'None (run once)', value: 'none', intervalLabel: ''},\n            {name: 'Minute', value: 'minutely', intervalLabel: 'minutes'},\n            {name: 'Hour', value: 'hourly', intervalLabel: 'hours'},\n            {name: 'Day', value: 'daily', intervalLabel: 'days'},\n            {name: 'Week', value: 'weekly', intervalLabel: 'weeks'},\n            {name: 'Month', value: 'monthly', intervalLabel: 'months'},\n            {name: 'Year', value: 'yearly', intervalLabel: 'years'}\n        ];\n\n        $scope.endOptions = [\n            {name: 'Never', value: 'never'},\n            {name: 'After', value: 'after'},\n            {name: 'On Date', value: 'on'}\n        ];\n\n        $scope.occurrences = [\n            {name: 'first', value: 1},\n            {name: 'second', value: 2},\n            {name: 'third', value: 3},\n            {name: 'fourth', value: 4},\n            {name: 'last', value: -1}\n        ];\n\n        $scope.weekdays = [\n            {name: 'Sunday', value: 'su'},\n            {name: 'Monday', value: 'mo'},\n            {name: 'Tuesday', value: 'tu'},\n            {name: 'Wednesday', value: 'we'},\n            {name: 'Thursday', value: 'th'},\n            {name: 'Friday', value: 'fr'},\n            {name: 'Saturday', value: 'sa'},\n            {name: 'Day', value: ['mo', 'tu', 'we', 'th', 'fr', 'sa', 'su']},\n            {name: 'Weekday', value: ['mo', 'tu', 'we', 'th', 'fr']},\n            {name: 'Weekend day', value: ['sa', 'su']}\n        ];\n\n        $scope.months = [\n            {name: 'January', value: 1},\n            {name: 'February', value: 2},\n            {name: 'March', value: 3},\n            {name: 'April', value: 4},\n            {name: 'May', value: 5},\n            {name: 'June', value: 6},\n            {name: 'July', value: 7},\n            {name: 'August', value: 8},\n            {name: 'September', value: 9},\n            {name: 'October', value: 10},\n            {name: 'November', value: 11},\n            {name: 'December', value: 12}\n        ];\n        //endregion\n\n\n        // region default values\n\n        $scope.schedulerName = '';\n        $scope.weekDays = [];\n        $scope.schedulerStartHour = function (value) {\n            if (arguments.length) {\n                $scope.schedulerUTCTime = moment($scope.schedulerUTCTime).hours(value).toDate();\n            } else {\n                return $scope.schedulerUTCTime.getHours();\n            }\n        };\n        $scope.schedulerStartMinute = function (value) {\n            if (arguments.length) {\n                $scope.schedulerUTCTime = moment($scope.schedulerUTCTime).minutes(value).toDate();\n            } else {\n                return $scope.schedulerUTCTime.getMinutes();\n            }\n        };\n        $scope.schedulerStartSecond = function (value) {\n            if (arguments.length) {\n                $scope.schedulerUTCTime = moment($scope.schedulerUTCTime).seconds(value).toDate();\n            } else {\n                return $scope.schedulerUTCTime.getSeconds();\n            }\n        };\n        $scope.schedulerUTCTime = moment().toDate();\n        $scope.schedulerFrequency = $scope.frequencyOptions[0];\n        $scope.schedulerShowEvery = false;\n        $scope.schedulerEnd = $scope.endOptions[0];\n        $scope.schedulerInterval = 1;\n        $scope.schedulerOccurrenceCount = 1;\n        $scope.monthlyRepeatOption = 'day';\n        $scope.monthDay = 1;\n        $scope.monthlyOccurrence = $scope.occurrences[0];\n        $scope.monthlyWeekDay = $scope.weekdays[0];\n        $scope.yearlyRepeatOption = 'month';\n        $scope.yearlyMonth = $scope.months[0];\n        $scope.yearlyMonthDay = 1;\n        $scope.yearlyWeekDay = $scope.weekdays[0];\n        $scope.yearlyOtherMonth = $scope.months[0];\n        $scope.yearlyOccurrence = $scope.occurrences[0];\n\n        //Detail view\n        $scope.schedulerIsValid = false;\n        $scope.rrule_nlp_description = '';\n        $scope.rrule = '';\n        $scope.dateChoice = 'utc';\n        $scope.occurrence_list = [];\n\n        //endregion\n\n\n        function CreateObject(scope, requireFutureST) {\n            var fn = function () {\n\n                this.scope = scope;\n                this.useTimezone = useTimezone;\n                this.requireFutureStartTime = requireFutureST;\n\n                // Evaluate user intput and build options for passing to rrule\n                this.getOptions = function () {\n                    var options = {};\n                    options.startDate = this.scope.schedulerUTCTime;\n                    options.frequency = this.scope.schedulerFrequency.value;\n                    options.interval = this.scope.schedulerInterval;\n                    if (this.scope.schedulerEnd.value === 'after') {\n                        options.occurrenceCount = this.scope.schedulerOccurrenceCount;\n                    }\n                    if (this.scope.schedulerEnd.value === 'on') {\n                        options.endDate = scope.schedulerEndDt.replace(/(\\d{2})\\/(\\d{2})\\/(\\d{4})/, function (match, p1, p2, p3) {\n                                return p3 + '-' + p1 + '-' + p2;\n                            }) + 'T' + this.scope.schedulerUTCTime.replace(/\\d{2}\\/\\d{2}\\/\\d{4} /, '').replace(/ UTC/, '') + 'Z';\n                    }\n                    if (this.scope.schedulerFrequency.value === 'weekly') {\n                        options.weekDays = this.scope.weekDays;\n                    }\n                    else if (this.scope.schedulerFrequency.value === 'yearly') {\n                        if (this.scope.yearlyRepeatOption === 'month') {\n                            options.month = this.scope.yearlyMonth.value;\n                            options.monthDay = this.scope.yearlyMonthDay;\n                        }\n                        else {\n                            options.setOccurrence = this.scope.yearlyOccurrence.value;\n                            options.weekDays = this.scope.yearlyWeekDay.value;\n                            options.month = this.scope.yearlyOtherMonth.value;\n                        }\n                    }\n                    else if (this.scope.schedulerFrequency.value === 'monthly') {\n                        if (this.scope.monthlyRepeatOption === 'day') {\n                            options.monthDay = this.scope.monthDay;\n                        }\n                        else {\n                            options.setOccurrence = this.scope.monthlyOccurrence.value;\n                            options.weekDays = this.scope.monthlyWeekDay.value;\n                        }\n                    }\n                    return options;\n                };\n\n                // Clear custom field errors\n                this.clearErrors = function () {\n                    this.scope.scheduler_weekDays_error = false;\n                    this.scope.scheduler_endDt_error = false;\n                    this.scope.resetStartDate();\n                    this.scope.scheduler_endDt_error = false;\n                    this.scope.scheduler_interval_error = false;\n                    this.scope.scheduler_occurrenceCount_error = false;\n                    this.scope.scheduler_monthDay_error = false;\n                    this.scope.scheduler_yearlyMonthDay_error = false;\n\n                    if (this.scope.scheduler_form && this.scope.scheduler_form.schedulerEndDt) {\n                        this.scope.scheduler_form.schedulerEndDt.$setValidity('custom-error', true);\n                        this.scope.scheduler_form.schedulerEndDt.$setPristine();\n                        this.scope.scheduler_form.$setPristine();\n                    }\n                };\n\n                // Set values for detail page\n                this.setDetails = function () {\n                    var rrule = this.getRRule(),\n                        scope = this.scope;\n                    if (rrule) {\n                        scope.rrule_nlp_description = rrule.toText();\n                        scope.dateChoice = 'local';\n                        scope.occurrence_list = [];\n                        rrule.all(function (date, i) {\n                            var local, dt;\n                            if (i < 10) {\n                                if (useTimezone) {\n                                    dt = $timezones.align(date, scope.schedulerTimeZone);\n                                    local = $filter('schZeroPad')(dt.getMonth() + 1, 2) + '/' +\n                                        $filter('schZeroPad')(dt.getDate(), 2) + '/' + dt.getFullYear() + ' ' +\n                                        $filter('schZeroPad')(dt.getHours(), 2) + ':' +\n                                        $filter('schZeroPad')(dt.getMinutes(), 2) + ':' +\n                                        $filter('schZeroPad')(dt.getSeconds(), 2) + ' ' +\n                                        dt.getTimezoneAbbreviation();\n                                }\n                                else {\n                                    local = $filter('date')(date, 'MM/dd/yyyy HH:mm:ss Z');\n                                }\n                                scope.occurrence_list.push({utc: $filter('schDateStrFix')(date.toISOString()), local: local});\n                                return true;\n                            }\n                            return false;\n                        });\n                        scope.rrule_nlp_description = rrule.toText().replace(/^RRule error.*$/, 'Natural language description not available');\n                        scope.rrule = rrule.toString();\n                    }\n                };\n\n                // Returns an rrule object\n                this.getRRule = function () {\n                    var options = this.getOptions();\n                    return GetRule(options);\n                };\n\n                // Return object containing schedule name, string representation of rrule per iCalendar RFC,\n                // and options used to create rrule\n                this.getValue = function () {\n                    var rule = this.getRRule(),\n                        options = this.getOptions();\n                    return {\n                        name: scope.schedulerName,\n                        rrule: rule.toString(),\n                        options: options\n                    };\n                };\n\n                this.setRRule = function (rule) {\n                    this.clear();\n                    return SetRule(rule, this.scope);\n                };\n\n                this.setName = function (name) {\n                    this.scope.schedulerName = name;\n                };\n\n                // Clear the form, returning all elements to a default state\n                this.clear = function () {\n                    this.clearErrors();\n                    if (this.scope.scheduler_form && this.scope.scheduler_form.schedulerName) {\n                        this.scope.scheduler_form.schedulerName.$setPristine();\n                    }\n                    this.scope.setDefaults();\n                };\n\n                // Get the user's local timezone\n                this.getUserTimezone = function () {\n                    return $timezones.getLocal();\n                };\n\n                // futureStartTime setter/getter\n                this.setRequireFutureStartTime = function (opt) {\n                    this.requireFutureStartTime = opt;\n                };\n\n                this.getRequireFutureStartTime = function () {\n                    return this.requireFutureStartTime;\n                };\n\n                this.setShowRRule = function (opt) {\n                    scope.showRRule = opt;\n                };\n            };\n            return new fn();\n        }\n\n        function Init(params) {\n\n            var scope = params.scope,\n                requireFutureStartTime = params.requireFutureStartTime || false;\n\n            scope.schedulerShowTimeZone = useTimezone;\n\n            scope.setDefaults = function () {\n                if (useTimezone) {\n                    scope.current_timezone = $timezones.getLocal();\n                    if ($.isEmptyObject(scope.current_timezone) || !scope.current_timezone.name) {\n                        $log.error('Failed to find local timezone. Defaulting to America/New_York.');\n                        scope.current_timezone = {name: 'America/New_York'};\n                    }\n                    // Set the <select> to the browser's local timezone\n                    scope.schedulerTimeZone = _.find(scope.timeZones, function (x) {\n                        return x.name === scope.current_timezone.name;\n                    });\n                }\n                //LoadLookupValues(scope);\n                //SetDefaults(scope);\n                scope.scheduleTimeChange();\n                scope.scheduleRepeatChange();\n            };\n\n            scope.scheduleTimeChange = function () {\n                if (useTimezone) {\n                    scope.resetStartDate();\n                    try {\n\n                        //todo check\n                        scope.schedulerUTCTime = moment(scope.schedulerUTCTime).tz(scope.schedulerTimeZone);\n\n                        scope.scheduler_form_schedulerStartDt_error = false;\n                        scope.scheduler_startTime_error = false;\n                    }\n                    catch (e) {\n                        scope.startDateError('Provide a valid start date and time');\n                    }\n                }\n                else {\n                    scope.scheduler_startTime_error = false;\n                    scope.scheduler_form_schedulerStartDt_error = false;\n                }\n            };\n\n            scope.resetError = function (variable) {\n                scope[variable] = false;\n            };\n\n            scope.scheduleRepeatChange = function () {\n                if (scope.schedulerFrequency && scope.schedulerFrequency.value !== '' && scope.schedulerFrequency.value !== 'none') {\n                    scope.schedulerInterval = 1;\n                    scope.schedulerShowInterval = true;\n                    scope.schedulerIntervalLabel = scope.schedulerFrequency.intervalLabel;\n                }\n                else {\n                    scope.schedulerShowInterval = false;\n                    scope.schedulerEnd = scope.endOptions[0];\n                }\n                scope.sheduler_frequency_error = false;\n            };\n\n            scope.setWeekday = function (event, day) {\n                // Add or remove day when user clicks checkbox button\n                var i = scope.weekDays.indexOf(day);\n                if (i >= 0) {\n                    scope.weekDays.splice(i, 1);\n                }\n                else {\n                    scope.weekDays.push(day);\n                }\n                $(event.target).blur();\n                scope.scheduler_weekDays_error = false;\n            };\n\n            scope.startDateError = function (msg) {\n                scope.scheduler_form_schedulerStartDt_error = msg;\n            };\n\n            scope.resetStartDate = function () {\n                scope.scheduler_form_schedulerStartDt_error = '';\n            };\n\n            scope.schedulerEndChange = function () {\n                var dt = new Date(), // date adjusted to local zone automatically\n                    month = $filter('schZeroPad')(dt.getMonth() + 1, 2),\n                    day = $filter('schZeroPad')(dt.getDate(), 2);\n                scope.schedulerEndDt = month + '/' + day + '/' + dt.getFullYear();\n                scope.schedulerOccurrenceCount = 1;\n            };\n\n            if (useTimezone) {\n                scope.timeZones = moment.tz.names();\n            }\n            scope.setDefaults();\n\n            return CreateObject(scope, requireFutureStartTime);\n\n        }\n\n        $scope.scheduler = Init({scope: $scope, requireFutureStartTime: false});\n    }]);\n","/**\n * @ngdoc directive\n * @name angular-ui-scheduler:angularUiScheduler\n *\n * @description\n *\n *\n * @restrict E\n * */\nangular.module('angular-ui-scheduler')\n    .directive('angularUiScheduler', function () {\n        return {\n            restrict: 'E',\n            templateUrl: 'angular-ui-scheduler/src/angularUiScheduler.html',\n            controller: 'angularUiSchedulerCtrl',\n            link: function (scope, elem, attr) {\n\n            }\n        };\n});\n","/**\n * @ngdoc service\n * @name angular-ui-scheduler:schDateStrFixFilter\n *\n * @description\n\n * $filter('schDateStrFix')(s)  where s is a date string in ISO format: yyyy-mm-ddTHH:MM:SS.sssZ. Returns string in format: mm/dd/yyyy HH:MM:SS UTC\n * */\nangular.module('angular-ui-scheduler')\n    .filter('schDateStrFix', function () {\n        return function (dateStr) {\n            return dateStr.replace(/(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}).*Z/, function (match, yy, mm, dd, hh, mi, ss) {\n                return mm + '/' + dd + '/' + yy + ' ' + hh + ':' + mi + ':' + ss + ' UTC';\n            });\n        };\n    });\n\n","/**\n * @ngdoc service\n * @name angular-ui-scheduler:schZeroPadFilter\n *\n * @description\n * $filter('schZeroPad')(n, pad) -- or -- {{ n | afZeroPad:pad }}\n *\n * */\nangular.module('angular-ui-scheduler')\n    .filter('schZeroPad', function () {\n        return function (n, pad) {\n            var str = (Math.pow(10, pad) + '').replace(/^1/, '') + (n + '').trim();\n            return str.substr(str.length - pad);\n        };\n    });","/**\n * @ngdoc service\n * @name angular-ui-scheduler:GetRule\n *\n * @description\n *\n *\n * */\nangular.module('angular-ui-scheduler')\n    .factory('GetRule',  [\"$log\", function ($log) {\n        return function (params) {\n            // Convert user inputs to an rrule. Returns rrule object using https://github.com/jkbr/rrule\n            // **list of 'valid values' found below in LoadLookupValues\n\n            var startDate = params.startDate,  // date object or string in yyyy-MM-ddTHH:mm:ss.sssZ format\n                frequency = params.frequency,  // string, optional, valid value from frequencyOptions\n                interval = params.interval,    // integer, optional\n                occurrenceCount = params.occurrenceCount,  //integer, optional\n                endDate = params.endDate,      // date object or string in yyyy-MM-dd format, optional\n                                               // ignored if occurrenceCount provided\n                month = params.month,          // integer, optional, valid value from months\n                monthDay = params.monthDay,    // integer, optional, between 1 and 31\n                weekDays = params.weekDays,     // integer, optional, valid value from weekdays\n                setOccurrence = params.setOccurrence, // integer, optional, valid value from occurrences\n                options = {}, i;\n\n            if (angular.isDate(startDate)) {\n                options.dtstart = startDate;\n            }\n            else {\n                try {\n                    options.dtstart = new Date(startDate);\n                }\n                catch (e) {\n                    $log.error('Date conversion failed. Attempted to convert ' + startDate + ' to Date. ' + e.message);\n                }\n            }\n\n            if (frequency && frequency !== 'none') {\n                options.freq = RRule[frequency.toUpperCase()];\n                options.interval = interval;\n\n                if (weekDays && typeof weekDays === 'string') {\n                    options.byweekday = RRule[weekDays.toUpperCase()];\n                }\n\n                if (weekDays && angular.isArray(weekDays)) {\n                    options.byweekday = [];\n                    for (i = 0; i < weekDays.length; i++) {\n                        options.byweekday.push(RRule[weekDays[i].toUpperCase()]);\n                    }\n                }\n\n                if (setOccurrence !== undefined && setOccurrence !== null) {\n                    options.bysetpos = setOccurrence;\n                }\n\n                if (month) {\n                    options.bymonth = month;\n                }\n\n                if (monthDay) {\n                    options.bymonthday = monthDay;\n                }\n\n                if (occurrenceCount) {\n                    options.count = occurrenceCount;\n                }\n                else if (endDate) {\n                    if (angular.isDate(endDate)) {\n                        options.until = endDate;\n                    }\n                    else {\n                        try {\n                            options.until = new Date(endDate);\n                        }\n                        catch (e) {\n                            $log.error('Date conversion failed. Attempted to convert ' + endDate + ' to Date. ' + e.message);\n                        }\n                    }\n                }\n            }\n            else {\n                // We only want to run 1x\n                options.freq = RRule.DAILY;\n                options.interval = 1;\n                options.count = 1;\n            }\n            return new RRule(options);\n        };\n    }]);","/**\n * @ngdoc service\n * @name angular-ui-scheduler:InRangeFactory\n *\n * @description\n *\n *\n * */\nangular.module('angular-ui-scheduler')\n    .factory('InRange', function () {\n        return function (x, min, max, length) {\n            var rx = new RegExp('\\\\d{1,' + length + '}');\n            if (!rx.test(x)) {\n                return false;\n            }\n            if (x < min || x > max) {\n                return false;\n            }\n            return true;\n        };\n    });\n","/**\n * @ngdoc service\n * @name angular-ui-scheduler:SetRule\n *\n * @description\n *\n *\n * */\nangular.module('angular-ui-scheduler')\n    .factory('SetRule', [\"useTimezone\", \"$log\", \"$timezones\", \"$filter\", function (useTimezone, $log, $timezones, $filter) {\n        return function (rule, scope) {\n            var set, result = '', i,\n                setStartDate = false;\n\n            // Search the set of RRule keys for a particular key, returning its value\n            function getValue(set, key) {\n                var pair = _.find(set, function (x) {\n                    var k = x.split(/=/)[0].toUpperCase();\n                    return (k === key);\n                });\n                if (pair) {\n                    return pair.split(/=/)[1].toUpperCase();\n                }\n                return null;\n            }\n\n            function toWeekDays(days) {\n                var darray = days.toLowerCase().split(/,/),\n                    match = _.find(scope.weekdays, function (x) {\n                        var warray = (angular.isArray(x.value)) ? x.value : [x.value],\n                            diffA = _.difference(warray, darray),\n                            diffB = _.difference(darray, warray);\n                        return (diffA.length === 0 && diffB.length === 0);\n                    });\n                return match;\n            }\n\n            function setValue(pair, set) {\n                var key = pair.split(/=/)[0].toUpperCase(),\n                    value = pair.split(/=/)[1],\n                    days, l, j, dt, month, day, timeString;\n\n                if (key === 'NAME') {\n                    //name is not actually part of RRule, but we can handle it just the same\n                    scope.schedulerName = value;\n                }\n\n                if (key === 'FREQ') {\n                    l = value.toLowerCase();\n                    scope.schedulerFrequency = _.find(scope.frequencyOptions, function (opt) {\n                        scope.schedulerIntervalLabel = opt.intervalLabel;\n                        return opt.value === l;\n                    });\n                    if (!scope.schedulerFrequency || !scope.schedulerFrequency.name) {\n                        result = 'FREQ not found in list of valid options';\n                    }\n                }\n                if (key === 'INTERVAL') {\n                    if (parseInt(value, 10)) {\n                        scope.schedulerInterval = parseInt(value, 10);\n                        scope.schedulerShowInterval = true;\n                    }\n                    else {\n                        result = 'INTERVAL must contain an integer > 0';\n                    }\n                }\n                if (key === 'BYDAY') {\n                    if (getValue(set, 'FREQ') === 'WEEKLY') {\n                        days = value.split(/,/);\n                        scope.weekDays = [];\n                        for (j = 0; j < days.length; j++) {\n                            if (_.contains(['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'], days[j])) {\n                                scope.weekDays.push(days[j].toLowerCase());\n                                scope['weekDay' + days[j].toUpperCase() + 'Class'] = 'active'; //activate related button\n                            }\n                            else {\n                                result = 'BYDAY contains unrecognized day value(s)';\n                            }\n                        }\n                    }\n                    else if (getValue(set, 'FREQ') === 'MONTHLY') {\n                        scope.monthlyRepeatOption = 'other';\n                        scope.monthlyWeekDay = toWeekDays(value);\n                        if (!scope.monthlyWeekDay) {\n                            result = 'BYDAY contains unrecognized day value(s)';\n                        }\n                    }\n                    else {\n                        scope.yearlyRepeatOption = 'other';\n                        scope.yearlyWeekDay = toWeekDays(value);\n                        if (!scope.yearlyWeekDay) {\n                            result = 'BYDAY contains unrecognized day value(s)';\n                        }\n                    }\n                }\n                if (key === 'BYMONTHDAY') {\n                    if (parseInt(value, 10) && parseInt(value, 10) > 0 && parseInt(value, 10) < 32) {\n                        scope.monthDay = parseInt(value, 10);\n                        scope.monhthlyRepeatOption = 'day';\n                    }\n                    else {\n                        result = 'BYMONTHDAY must contain an integer between 1 and 31';\n                    }\n                }\n                if (key === 'DTSTART') {\n                    // The form has been reset to the local zone\n                    setStartDate = true;\n                    if (/\\d{8}T\\d{6}.*Z/.test(value)) {\n                        // date may come in without separators. add them so new Date constructor will work\n                        value = value.replace(/(\\d{4})(\\d{2})(\\d{2}T)(\\d{2})(\\d{2})(\\d{2}.*$)/,\n                            function (match, p1, p2, p3, p4, p5, p6) {\n                                return p1 + '-' + p2 + '-' + p3 + p4 + ':' + p5 + ':' + p6.substr(0, 2) + 'Z';\n                            });\n                    }\n                    if (useTimezone) {\n                        dt = new Date(value); // date adjusted to local zone automatically\n                        month = $filter('schZeroPad')(dt.getMonth() + 1, 2);\n                        day = $filter('schZeroPad')(dt.getDate(), 2);\n                        scope.schedulerStartDt = month + '/' + day + '/' + dt.getFullYear();\n                        scope.schedulerStartHour = $filter('schZeroPad')(dt.getHours(), 2);\n                        scope.schedulerStartMinute = $filter('schZeroPad')(dt.getMinutes(), 2);\n                        scope.schedulerStartSecond = $filter('schZeroPad')(dt.getSeconds(), 2);\n                        scope.scheduleTimeChange();  // calc UTC\n                    }\n                    else {\n                        // expects inbound dates to be in ISO format: 2014-04-02T00:00:00.000Z\n                        scope.schedulerStartDt = value.replace(/T.*$/, '').replace(/(\\d{4})-(\\d{2})-(\\d{2})/, function (match, p1, p2, p3) {\n                            return p2 + '/' + p3 + '/' + p1;\n                        });\n                        timeString = value.replace(/^.*T/, '');\n                        scope.schedulerStartHour = $filter('schZeroPad')(timeString.substr(0, 2), 2);\n                        scope.schedulerStartMinute = $filter('schZeroPad')(timeString.substr(3, 2), 2);\n                        scope.schedulerStartSecond = $filter('schZeroPad')(timeString.substr(6, 2), 2);\n                    }\n                    scope.scheduleTimeChange();\n                }\n                if (key === 'BYSETPOS') {\n                    if (getValue(set, 'FREQ') === 'YEARLY') {\n                        scope.yearlRepeatOption = 'other';\n                        scope.yearlyOccurrence = _.find(scope.occurrences, function (x) {\n                            return (x.value === parseInt(value, 10));\n                        });\n                        if (!scope.yearlyOccurrence || !scope.yearlyOccurrence.name) {\n                            result = 'BYSETPOS was not in the set of 1,2,3,4,-1';\n                        }\n                    }\n                    else {\n                        scope.monthlyOccurrence = _.find(scope.occurrences, function (x) {\n                            return (x.value === parseInt(value, 10));\n                        });\n                        if (!scope.monthlyOccurrence || !scope.monthlyOccurrence.name) {\n                            result = 'BYSETPOS was not in the set of 1,2,3,4,-1';\n                        }\n                    }\n                }\n\n                if (key === 'COUNT') {\n                    if (parseInt(value, 10)) {\n                        scope.schedulerEnd = scope.endOptions[1];\n                        scope.schedulerOccurrenceCount = parseInt(value, 10);\n                    }\n                    else {\n                        result = 'COUNT must be a valid integer > 0';\n                    }\n                }\n\n                if (key === 'UNTIL') {\n                    if (/\\d{8}T\\d{6}.*Z/.test(value)) {\n                        // date may come in without separators. add them so new Date constructor will work\n                        value = value.replace(/(\\d{4})(\\d{2})(\\d{2}T)(\\d{2})(\\d{2})(\\d{2}.*$)/,\n                            function (match, p1, p2, p3, p4, p5, p6) {\n                                return p1 + '-' + p2 + '-' + p3 + p4 + ':' + p5 + ':' + p6.substr(0, 2) + 'Z';\n                            });\n                    }\n                    scope.schedulerEnd = scope.endOptions[2];\n                    if (useTimezone) {\n                        dt = new Date(value); // date adjusted to local zone automatically\n                        month = $filter('schZeroPad')(dt.getMonth() + 1, 2);\n                        day = $filter('schZeroPad')(dt.getDate(), 2);\n                        scope.schedulerEndDt = month + '/' + day + '/' + dt.getFullYear();\n                    }\n                    else {\n                        scope.schedulerEndDt = value.replace(/T.*$/, '').replace(/(\\d{4})-(\\d{2})-(\\d{2})/, function (match, p1, p2, p3) {\n                            return p2 + '/' + p3 + '/' + p1;\n                        });\n                    }\n                }\n\n                if (key === 'BYMONTH') {\n                    if (getValue(set, 'FREQ') === 'YEARLY' && getValue(set, 'BYDAY')) {\n                        scope.yearlRepeatOption = 'other';\n                        scope.yearlyOtherMonth = _.find(scope.months, function (x) {\n                            return x.value === parseInt(value, 10);\n                        });\n                        if (!scope.yearlyOtherMonth || !scope.yearlyOtherMonth.name) {\n                            result = 'BYMONTH must be an integer between 1 and 12';\n                        }\n                    }\n                    else {\n                        scope.yearlyOption = 'month';\n                        scope.yearlyMonth = _.find(scope.months, function (x) {\n                            return x.value === parseInt(value, 10);\n                        });\n                        if (!scope.yearlyMonth || !scope.yearlyMonth.name) {\n                            result = 'BYMONTH must be an integer between 1 and 12';\n                        }\n                    }\n                }\n\n                if (key === 'BYMONTHDAY') {\n                    if (parseInt(value, 10)) {\n                        scope.yearlyMonthDay = parseInt(value, 10);\n                    }\n                    else {\n                        result = 'BYMONTHDAY must be an integer between 1 and 31';\n                    }\n                }\n            }\n\n            function isValid() {\n                // Check what was put into scope vars, and see if anything is\n                // missing or not quite right.\n                if (scope.schedulerFrequency.name === 'weekly' && scope.weekDays.length === 0) {\n                    result = 'Frequency is weekly, but BYDAYS value is missing.';\n                }\n                if (!setStartDate) {\n                    result = 'Warning: start date was not provided';\n                }\n            }\n\n            if (rule) {\n                set = rule.split(/;/);\n                if (angular.isArray(set)) {\n                    for (i = 0; i < set.length; i++) {\n                        setValue(set[i], set);\n                        if (result) {\n                            break;\n                        }\n                    }\n                    if (!result) {\n                        isValid();\n                    }\n                }\n                else {\n                    result = 'No rule entered. Provide a valid RRule string.';\n                }\n            }\n            else {\n                result = 'No rule entered. Provide a valid RRule string.';\n            }\n            if (result) {\n                $log.error(result);\n            }\n            return result;\n        };\n    }]);"],"sourceRoot":"/source/"}