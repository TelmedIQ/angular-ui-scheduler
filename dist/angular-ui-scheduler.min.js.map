{"version":3,"sources":["app.js","angularUiSchedulerCtrl.js","angularUiSchedulerDirective.js","filters/schZeroPadFilter.js","services/rRuleHelper.js"],"names":["angular","module","constant","controller","$scope","$filter","$log","rRuleHelper","angular_ui_scheduler_useTimezone","angular_ui_scheduler_frequencyOptions","angular_ui_scheduler_endOptions","angular_ui_scheduler_occurrences","angular_ui_scheduler_weekdays","angular_ui_scheduler_months","init","weekDays","schedulerStartDt","Date","schedulerFrequency","frequencyOptions","schedulerShowEvery","schedulerEnd","endOptions","schedulerInterval","schedulerOccurrenceCount","monthlyRepeatOption","monthDay","monthlyOccurrence","occurrences","monthlyWeekDay","weekdays","yearlyRepeatOption","yearlyMonth","months","yearlyWeekDay","yearlyOtherMonth","yearlyOccurrence","timeZones","moment","tz","names","setDefaults","schedulerShowTimeZone","schedulerStartHour","value","arguments","length","hours","toDate","getHours","schedulerStartMinute","minutes","getMinutes","schedulerStartSecond","seconds","getSeconds","scheduleTimeChange","scheduleRepeatChange","resetStartDate","scheduler_form_schedulerStartDt_error","scheduler_startTime_error","e","startDateError","schedulerShowInterval","schedulerIntervalLabel","intervalLabel","sheduler_frequency_error","resetError","variable","setWeekday","event","day","i","indexOf","splice","push","$","target","blur","scheduler_weekDays_error","msg","schedulerEndChange","clearErrors","scheduler_endDt_error","scheduler_interval_error","scheduler_occurrenceCount_error","scheduler_monthDay_error","getRRule","getRule","getValue","options","getOptions","rrule","toString","setRRule","rule","clear","setRule","name","directive","restrict","require","templateUrl","scope","hideStart","link","iElement","iAttrs","ngModelCtrl","$formatters","modelValue","debug","copy","$parsers","viewValue","$watch","newRule","$setViewValue","required","$validators","newVal","filter","n","pad","str","Math","pow","replace","trim","substr","factory","startDate","frequency","interval","occurrenceCount","endDate","add","month","setOccurrence","params","this","isDate","dtstart","error","message","freq","RRule","toUpperCase","byweekday","isArray","undefined","bysetpos","bymonth","bymonthday","count","until","DAILY","set","key","pair","_","find","x","k","split","toWeekDays","days","darray","toLowerCase","match","warray","diffA","difference","diffB","normalizeDate","test","p1","p2","p3","p4","p5","p6","setValue","token","tokens","l","opt","parseInt","j","contains","monhthlyRepeatOption","tmpDate","isValid","yearlRepeatOption","schedulerEndDt","yearlyOption","warn","validate","forEach"],"mappings":"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","file":"angular-ui-scheduler.min.js","sourcesContent":["angular.module('angular-ui-scheduler', [])\n    .constant('angular_ui_scheduler_hideStart', true)\n    .constant('angular_ui_scheduler_useTimezone', false);","/**\n * @ngdoc controller\n * @name angular-ui-scheduler:angularUiSchedulerCtrl\n *\n * @description\n *\n *\n * @requires $scope\n * */\nangular.module('angular-ui-scheduler')\n    .controller('angularUiSchedulerCtrl', [\"$scope\", \"$filter\", \"$log\", \"rRuleHelper\", \"angular_ui_scheduler_useTimezone\", \"angular_ui_scheduler_frequencyOptions\", \"angular_ui_scheduler_endOptions\", \"angular_ui_scheduler_occurrences\", \"angular_ui_scheduler_weekdays\", \"angular_ui_scheduler_months\", function ($scope, $filter, $log, rRuleHelper,\n                                                    angular_ui_scheduler_useTimezone,\n                                                    angular_ui_scheduler_frequencyOptions,\n                                                    angular_ui_scheduler_endOptions,\n                                                    angular_ui_scheduler_occurrences,\n                                                    angular_ui_scheduler_weekdays,\n                                                    angular_ui_scheduler_months) {\n        //region lookup fields\n\n        $scope.schedulerShowTimeZone = angular_ui_scheduler_useTimezone;\n\n        $scope.frequencyOptions = angular_ui_scheduler_frequencyOptions;\n\n        $scope.endOptions = angular_ui_scheduler_endOptions;\n\n        $scope.occurrences = angular_ui_scheduler_occurrences;\n\n        $scope.weekdays = angular_ui_scheduler_weekdays;\n\n        $scope.months = angular_ui_scheduler_months;\n\n        //endregion\n\n        //region this should be moved to time edit directive\n        $scope.schedulerStartHour = function (value) {\n            if (arguments.length) {\n                $scope.schedulerStartDt = moment($scope.schedulerStartDt).hours(value).toDate();\n            } else {\n                return $scope.schedulerStartDt.getHours();\n            }\n        };\n        $scope.schedulerStartMinute = function (value) {\n            if (arguments.length) {\n                $scope.schedulerStartDt = moment($scope.schedulerStartDt).minutes(value).toDate();\n            } else {\n                return $scope.schedulerStartDt.getMinutes();\n            }\n        };\n        $scope.schedulerStartSecond = function (value) {\n            if (arguments.length) {\n                $scope.schedulerStartDt = moment($scope.schedulerStartDt).seconds(value).toDate();\n            } else {\n                return $scope.schedulerStartDt.getSeconds();\n            }\n        };\n        //endregion\n\n        $scope.setDefaults = function () {\n            $scope.scheduleTimeChange();\n            $scope.scheduleRepeatChange();\n        };\n\n        $scope.scheduleTimeChange = function () {\n            if (angular_ui_scheduler_useTimezone) {\n                $scope.resetStartDate();\n                try {\n                    $scope.scheduler_form_schedulerStartDt_error = false;\n                    $scope.scheduler_startTime_error = false;\n                }\n                catch (e) {\n                    $scope.startDateError('Provide a valid start date and time');\n                }\n            }\n            else {\n                $scope.scheduler_startTime_error = false;\n                $scope.scheduler_form_schedulerStartDt_error = false;\n            }\n        };\n\n        $scope.scheduleRepeatChange = function () {\n            if ($scope.schedulerFrequency && $scope.schedulerFrequency.value !== '' && $scope.schedulerFrequency.value !== 'none') {\n                $scope.schedulerInterval = 1;\n                $scope.schedulerShowInterval = true;\n                $scope.schedulerIntervalLabel = $scope.schedulerFrequency.intervalLabel;\n            }\n            else {\n                $scope.schedulerShowInterval = false;\n                $scope.schedulerEnd = $scope.endOptions[0];\n            }\n            $scope.sheduler_frequency_error = false;\n        };\n\n        $scope.resetError = function (variable) {\n            $scope[variable] = false;\n        };\n\n        $scope.setWeekday = function (event, day) {\n            // Add or remove day when user clicks checkbox button\n            var i = $scope.weekDays.indexOf(day);\n            if (i >= 0) {\n                $scope.weekDays.splice(i, 1);\n            }\n            else {\n                $scope.weekDays.push(day);\n            }\n            $(event.target).blur();\n            $scope.scheduler_weekDays_error = false;\n        };\n\n        $scope.startDateError = function (msg) {\n            $scope.scheduler_form_schedulerStartDt_error = msg;\n        };\n\n        $scope.resetStartDate = function () {\n            $scope.scheduler_form_schedulerStartDt_error = '';\n        };\n\n        $scope.schedulerEndChange = function () {\n            $scope.schedulerOccurrenceCount = 1;\n        };\n\n        // Clear custom field errors\n        $scope.clearErrors = function () {\n            $scope.scheduler_weekDays_error = false;\n            $scope.scheduler_endDt_error = false;\n            $scope.resetStartDate();\n            $scope.scheduler_endDt_error = false;\n            $scope.scheduler_interval_error = false;\n            $scope.scheduler_occurrenceCount_error = false;\n            $scope.scheduler_monthDay_error = false;\n        };\n\n        // Set values for detail page\n        //$scope.setDetails = function () {\n        //    //Detail view\n        //    $scope.schedulerIsValid = false;\n        //    $scope.rrule_nlp_description = '';\n        //    $scope.rrule = '';\n        //    $scope.dateChoice = 'utc';\n        //    $scope.occurrence_list = [];\n        //\n        //    //var rrule = this.getRRule(),\n        //    //    scope = this.scope;\n        //    //if (rrule) {\n        //    //    scope.rrule_nlp_description = rrule.toText();\n        //    //    scope.dateChoice = 'local';\n        //    //    scope.occurrence_list = [];\n        //    //    rrule.all(function (date, i) {\n        //    //        var local, dt;\n        //    //        if (i < 10) {\n        //    //            if (angular_ui_scheduler_useTimezone) {\n        //    //                dt = $timezones.align(date, scope.schedulerTimeZone);\n        //    //                local = $filter('schZeroPad')(dt.getMonth() + 1, 2) + '/' +\n        //    //                    $filter('schZeroPad')(dt.getDate(), 2) + '/' + dt.getFullYear() + ' ' +\n        //    //                    $filter('schZeroPad')(dt.getHours(), 2) + ':' +\n        //    //                    $filter('schZeroPad')(dt.getMinutes(), 2) + ':' +\n        //    //                    $filter('schZeroPad')(dt.getSeconds(), 2) + ' ' +\n        //    //                    dt.getTimezoneAbbreviation();\n        //    //            }\n        //    //            else {\n        //    //                local = $filter('date')(date, 'MM/dd/yyyy HH:mm:ss Z');\n        //    //            }\n        //    //            scope.occurrence_list.push({utc: $filter('schDateStrFix')(date.toISOString()), local: local});\n        //    //            return true;\n        //    //        }\n        //    //        return false;\n        //    //    });\n        //    //    scope.rrule_nlp_description = rrule.toText().replace(/^RRule error.*$/, 'Natural language description not available');\n        //    //    scope.rrule = rrule.toString();\n        //    //}\n        //};\n\n        // Returns an rrule object\n        $scope.getRRule = function () {\n            return rRuleHelper.getRule($scope);\n        };\n\n        // Return object containing schedule name, string representation of rrule per iCalendar RFC and options used to create rrule\n        $scope.getValue = function () {\n            var rule = $scope.getRRule(),\n                options = rRuleHelper.getOptions($scope);\n            return {\n                rrule: $scope.getRRule().toString(),\n                options: options\n            };\n        };\n\n        $scope.setRRule = function (rule) {\n            $scope.clear();\n            return rRuleHelper.setRule(rule, $scope);\n        };\n\n        // Clear the form, returning all elements to a default state\n        $scope.clear = function () {\n            $scope.clearErrors();\n            $scope.setDefaults();\n        };\n\n        function init() {\n            $scope.weekDays = [];\n            $scope.schedulerStartDt = new Date();\n            $scope.schedulerFrequency = $scope.frequencyOptions[0];\n            $scope.schedulerShowEvery = false;\n            $scope.schedulerEnd = $scope.endOptions[0];\n            $scope.schedulerInterval = 1;\n            $scope.schedulerOccurrenceCount = 1;\n            $scope.monthlyRepeatOption = 'day';\n            $scope.monthDay = 1;\n            $scope.monthlyOccurrence = $scope.occurrences[0];\n            $scope.monthlyWeekDay = $scope.weekdays[0];\n            $scope.yearlyRepeatOption = 'month';\n            $scope.yearlyMonth = $scope.months[0];\n            $scope.yearlyWeekDay = $scope.weekdays[0];\n            $scope.yearlyOtherMonth = $scope.months[0];\n            $scope.yearlyOccurrence = $scope.occurrences[0];\n\n            if (angular_ui_scheduler_useTimezone) {\n                $scope.timeZones = moment.tz.names();\n            }\n            $scope.setDefaults();\n        }\n\n        init();\n\n    }]);\n","/**\n * @ngdoc directive\n * @name angular-ui-scheduler:angularUiScheduler\n *\n * @description\n *\n *\n * @restrict E\n * */\nangular.module('angular-ui-scheduler')\n    .constant('angular_ui_scheduler_frequencyOptions', [\n        {name: 'None (run once)', value: 'none', intervalLabel: ''},\n        {name: 'Minute', value: 'minutely', intervalLabel: 'minute(s)'},\n        {name: 'Hour', value: 'hourly', intervalLabel: 'hour(s)'},\n        {name: 'Day', value: 'daily', intervalLabel: 'day(s)'},\n        {name: 'Week', value: 'weekly', intervalLabel: 'week(s)'},\n        {name: 'Month', value: 'monthly', intervalLabel: 'month(s)'},\n        {name: 'Year', value: 'yearly', intervalLabel: 'year(s)'}\n    ])\n    .constant('angular_ui_scheduler_endOptions', [\n        {name: 'Never', value: 'never'},\n        {name: 'After', value: 'after'},\n        {name: 'On Date', value: 'on'}\n    ])\n    .constant('angular_ui_scheduler_occurrences', [\n        {name: 'first', value: 1},\n        {name: 'second', value: 2},\n        {name: 'third', value: 3},\n        {name: 'fourth', value: 4},\n        {name: 'last', value: -1}\n    ])\n    .constant('angular_ui_scheduler_weekdays', [\n        {name: 'Sunday', value: 'su'},\n        {name: 'Monday', value: 'mo'},\n        {name: 'Tuesday', value: 'tu'},\n        {name: 'Wednesday', value: 'we'},\n        {name: 'Thursday', value: 'th'},\n        {name: 'Friday', value: 'fr'},\n        {name: 'Saturday', value: 'sa'},\n        {name: 'Day', value: ['mo', 'tu', 'we', 'th', 'fr', 'sa', 'su']},\n        {name: 'Weekday', value: ['mo', 'tu', 'we', 'th', 'fr']},\n        {name: 'Weekend day', value: ['sa', 'su']}\n    ])\n    .constant('angular_ui_scheduler_months', [\n        {name: 'January', value: 1},\n        {name: 'February', value: 2},\n        {name: 'March', value: 3},\n        {name: 'April', value: 4},\n        {name: 'May', value: 5},\n        {name: 'June', value: 6},\n        {name: 'July', value: 7},\n        {name: 'August', value: 8},\n        {name: 'September', value: 9},\n        {name: 'October', value: 10},\n        {name: 'November', value: 11},\n        {name: 'December', value: 12}\n    ])\n    .directive('angularUiScheduler', [\"$log\", function ($log) {\n        return {\n            restrict: 'E',\n            require: 'ngModel',\n            templateUrl: 'angular-ui-scheduler/src/angularUiScheduler.html',\n            scope: {\n                rrule: '@',\n                hideStart: '='\n            },\n            controller: 'angularUiSchedulerCtrl',\n            link: function (scope, iElement, iAttrs, ngModelCtrl) {\n\n                //region handle ngModelCtrl\n                ngModelCtrl.$formatters.push(function (modelValue) {\n                    $log.debug('angularUiSchedulerCtrl $formatters', modelValue);\n                    return angular.copy(modelValue);\n                });\n\n                ngModelCtrl.$parsers.push(function (viewValue) {\n                    $log.debug('angularUiSchedulerCtrl $parsers', viewValue);\n                    return angular.copy(viewValue);\n                });\n\n                scope.$watch('rule', function (newRule) {\n                    $log.debug('angularUiSchedulerCtrl updates ngModel binding', newRule);\n                    ngModelCtrl.$setViewValue(angular.copy(newRule));\n                }, true);\n\n                //ngModelCtrl.$render = function () {\n                //    scope.role = ngModelCtrl.$viewValue;\n                //};\n\n                if (iAttrs.required) {\n                    ngModelCtrl.$validators.required = function (modelValue, viewValue) {\n                        return modelValue;\n                    };\n                }\n                //endregion\n\n                scope.$watch('rrule', function (newVal) {\n                    if (newVal) {\n                        $log.debug(newVal);\n                        scope.setRRule(newVal);\n                    }\n                });\n            }\n        };\n    }]);","/**\n * @ngdoc service\n * @name angular-ui-scheduler:schZeroPadFilter\n *\n * @description\n * $filter('schZeroPad')(n, pad) -- or -- {{ n | afZeroPad:pad }}\n *\n * */\nangular.module('angular-ui-scheduler')\n    .filter('schZeroPad', function () {\n        return function (n, pad) {\n            var str = (Math.pow(10, pad) + '').replace(/^1/, '') + (n + '').trim();\n            return str.substr(str.length - pad);\n        };\n    });","/**\r\n * @ngdoc service\r\n * @name angular-ui-scheduler:rRuleHelper\r\n *\r\n * @description\r\n *\r\n *\r\n * */\r\nangular.module('angular-ui-scheduler')\r\n    .factory('rRuleHelper', [\"angular_ui_scheduler_useTimezone\", \"$log\", \"$filter\", \"angular_ui_scheduler_frequencyOptions\", \"angular_ui_scheduler_occurrences\", \"angular_ui_scheduler_endOptions\", \"angular_ui_scheduler_weekdays\", \"angular_ui_scheduler_months\", function (angular_ui_scheduler_useTimezone, $log, $filter,\r\n                                      angular_ui_scheduler_frequencyOptions,\r\n                                      angular_ui_scheduler_occurrences,\r\n                                      angular_ui_scheduler_endOptions,\r\n                                      angular_ui_scheduler_weekdays,\r\n                                      angular_ui_scheduler_months) {\r\n        return {\r\n\r\n            // Evaluate user intput and build options for passing to rrule\r\n            getOptions: function (scope) {\r\n                var options = {};\r\n                options.startDate = scope.schedulerStartDt;\r\n                options.frequency = scope.schedulerFrequency.value;\r\n                options.interval = scope.schedulerInterval;\r\n                if (scope.schedulerEnd.value === 'after') {\r\n                    options.occurrenceCount = scope.schedulerOccurrenceCount;\r\n                }\r\n                if (scope.schedulerEnd.value === 'on') {\r\n                    options.endDate = moment(scope.schedulerStartDt).add(1, 'd').toDate();\r\n                }\r\n                if (scope.schedulerFrequency.value === 'weekly') {\r\n                    options.weekDays = scope.weekDays;\r\n                }\r\n                else if (scope.schedulerFrequency.value === 'yearly') {\r\n                    if (scope.yearlyRepeatOption === 'month') {\r\n                        options.month = scope.yearlyMonth.value;\r\n                        options.monthDay = scope.monthDay;\r\n                    }\r\n                    else {\r\n                        options.setOccurrence = scope.yearlyOccurrence.value;\r\n                        options.weekDays = scope.yearlyWeekDay.value;\r\n                        options.month = scope.yearlyOtherMonth.value;\r\n                    }\r\n                }\r\n                else if (scope.schedulerFrequency.value === 'monthly') {\r\n                    if (scope.monthlyRepeatOption === 'day') {\r\n                        options.monthDay = scope.monthDay;\r\n                    }\r\n                    else {\r\n                        options.setOccurrence = scope.monthlyOccurrence.value;\r\n                        options.weekDays = scope.monthlyWeekDay.value;\r\n                    }\r\n                }\r\n                return options;\r\n            },\r\n\r\n            //returns rrule based on current state of UI\r\n            getRule: function (scope) {\r\n\r\n                var params = this.getOptions(scope);\r\n\r\n                // Convert user inputs to an rrule. Returns rrule object using https://github.com/jkbr/rrule\r\n                // **list of 'valid values' found below in LoadLookupValues\r\n\r\n                var startDate = params.startDate,  // date object or string in yyyy-MM-ddTHH:mm:ss.sssZ format\r\n                    frequency = params.frequency,  // string, optional, valid value from frequencyOptions\r\n                    interval = params.interval,    // integer, optional\r\n                    occurrenceCount = params.occurrenceCount,  //integer, optional\r\n                    endDate = params.endDate,      // date object or string in yyyy-MM-dd format, optional\r\n                                                   // ignored if occurrenceCount provided\r\n                    month = params.month,          // integer, optional, valid value from months\r\n                    monthDay = params.monthDay,    // integer, optional, between 1 and 31\r\n                    weekDays = params.weekDays,     // integer, optional, valid value from weekdays\r\n                    setOccurrence = params.setOccurrence, // integer, optional, valid value from occurrences\r\n                    options = {}, i;\r\n\r\n                if (angular.isDate(startDate)) {\r\n                    options.dtstart = startDate;\r\n                }\r\n                else {\r\n                    try {\r\n                        options.dtstart = new Date(startDate);\r\n                    }\r\n                    catch (e) {\r\n                        $log.error('Date conversion failed. Attempted to convert ' + startDate + ' to Date. ' + e.message);\r\n                    }\r\n                }\r\n\r\n                if (frequency && frequency !== 'none') {\r\n                    options.freq = RRule[frequency.toUpperCase()];\r\n                    options.interval = interval;\r\n\r\n                    if (weekDays && typeof weekDays === 'string') {\r\n                        options.byweekday = RRule[weekDays.toUpperCase()];\r\n                    }\r\n\r\n                    if (weekDays && angular.isArray(weekDays)) {\r\n                        options.byweekday = [];\r\n                        for (i = 0; i < weekDays.length; i++) {\r\n                            options.byweekday.push(RRule[weekDays[i].toUpperCase()]);\r\n                        }\r\n                    }\r\n\r\n                    if (setOccurrence !== undefined && setOccurrence !== null) {\r\n                        options.bysetpos = setOccurrence;\r\n                    }\r\n\r\n                    if (month) {\r\n                        options.bymonth = month;\r\n                    }\r\n\r\n                    if (monthDay) {\r\n                        options.bymonthday = monthDay;\r\n                    }\r\n\r\n                    if (occurrenceCount) {\r\n                        options.count = occurrenceCount;\r\n                    }\r\n                    else if (endDate) {\r\n                        if (angular.isDate(endDate)) {\r\n                            options.until = endDate;\r\n                        }\r\n                        else {\r\n                            try {\r\n                                options.until = new Date(endDate);\r\n                            }\r\n                            catch (e) {\r\n                                $log.error('Date conversion failed. Attempted to convert ' + endDate + ' to Date. ' + e.message);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    // We only want to run 1x\r\n                    options.freq = RRule.DAILY;\r\n                    options.interval = 1;\r\n                    options.count = 1;\r\n                }\r\n                return new RRule(options);\r\n            },\r\n\r\n            //configures UI based on rrule\r\n            setRule: function (rule, params) {\r\n\r\n                // Search the tokens of RRule keys for a particular key, returning its value\r\n                function getValue(set, key) {\r\n                    var pair = _.find(set, function (x) {\r\n                        var k = x.split(/=/)[0].toUpperCase();\r\n                        return (k === key);\r\n                    });\r\n                    if (pair) {\r\n                        return pair.split(/=/)[1].toUpperCase();\r\n                    }\r\n                    return null;\r\n                }\r\n\r\n                function toWeekDays(days) {\r\n                    var darray = days.toLowerCase().split(/,/),\r\n                        match = _.find(angular_ui_scheduler_weekdays, function (x) {\r\n                            var warray = (angular.isArray(x.value)) ? x.value : [x.value],\r\n                                diffA = _.difference(warray, darray),\r\n                                diffB = _.difference(darray, warray);\r\n                            return (diffA.length === 0 && diffB.length === 0);\r\n                        });\r\n                    return match;\r\n                }\r\n\r\n                function normalizeDate(value) {\r\n                    if (/\\d{8}T\\d{6}.*Z/.test(value)) {\r\n                        // date may come in without separators. add them so new Date constructor will work\r\n                        value = value.replace(/(\\d{4})(\\d{2})(\\d{2}T)(\\d{2})(\\d{2})(\\d{2}.*$)/,\r\n                            function (match, p1, p2, p3, p4, p5, p6) {\r\n                                return p1 + '-' + p2 + '-' + p3 + p4 + ':' + p5 + ':' + p6.substr(0, 2) + 'Z';\r\n                            });\r\n                    }\r\n                    return value;\r\n                }\r\n\r\n                function setValue(token, tokens) {\r\n\r\n                    var key = token[0].toUpperCase(),\r\n                        value = token[1];\r\n\r\n                    switch (key) {\r\n                        case 'FREQ':\r\n                            var l = value.toLowerCase();\r\n                            params.schedulerFrequency = _.find(angular_ui_scheduler_frequencyOptions, function (opt) {\r\n                                params.schedulerIntervalLabel = opt.intervalLabel;\r\n                                return opt.value === l;\r\n                            });\r\n                            if (!params.schedulerFrequency || !params.schedulerFrequency.name) {\r\n                                throw 'FREQ not found in list of valid options';\r\n                            }\r\n                            break;\r\n\r\n                        case 'INTERVAL' :\r\n                            if (parseInt(value, 10)) {\r\n                                params.schedulerInterval = parseInt(value, 10);\r\n                                params.schedulerShowInterval = true;\r\n                            }\r\n                            else {\r\n                                throw 'INTERVAL must contain an integer > 0';\r\n                            }\r\n                            break;\r\n\r\n                        case 'BYDAY':\r\n                            if (getValue(tokens, 'FREQ') === 'WEEKLY') {\r\n                                var days = value.split(/,/);\r\n                                params.weekDays = [];\r\n                                for (var j = 0; j < days.length; j++) {\r\n                                    if (_.contains(['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'], days[j])) {\r\n                                        params.weekDays.push(days[j].toLowerCase());\r\n                                        params['weekDay' + days[j].toUpperCase() + 'Class'] = 'active'; //activate related button\r\n                                    }\r\n                                    else {\r\n                                        throw 'BYDAY contains unrecognized day value(s)';\r\n                                    }\r\n                                }\r\n                            }\r\n                            else if (getValue(tokens, 'FREQ') === 'MONTHLY') {\r\n                                params.monthlyRepeatOption = 'other';\r\n                                params.monthlyWeekDay = toWeekDays(value);\r\n                                if (!params.monthlyWeekDay) {\r\n                                    throw 'BYDAY contains unrecognized day value(s)';\r\n                                }\r\n                            }\r\n                            else {\r\n                                params.yearlyRepeatOption = 'other';\r\n                                params.yearlyWeekDay = toWeekDays(value);\r\n                                if (!params.yearlyWeekDay) {\r\n                                    throw 'BYDAY contains unrecognized day value(s)';\r\n                                }\r\n                            }\r\n                            break;\r\n\r\n                        case 'BYMONTHDAY':\r\n                            if (parseInt(value, 10) && parseInt(value, 10) > 0 && parseInt(value, 10) < 32) {\r\n                                params.monthDay = parseInt(value, 10);\r\n                                params.monhthlyRepeatOption = 'day';\r\n                            }\r\n                            else {\r\n                                throw 'BYMONTHDAY must contain an integer between 1 and 31';\r\n                            }\r\n                            break;\r\n\r\n                        case 'DTSTART':\r\n                            // The form has been reset to the local zone\r\n                            value = normalizeDate(value);\r\n                            var tmpDate = moment(value);\r\n                            if (!tmpDate.isValid()) {\r\n                                throw 'Invalid DTSTART: ' + value;\r\n                            }\r\n                            params.schedulerStartDt = tmpDate.toDate();\r\n                            break;\r\n\r\n                        case 'BYSETPOS':\r\n                            if (getValue(tokens, 'FREQ') === 'YEARLY') {\r\n                                params.yearlRepeatOption = 'other';\r\n                                params.yearlyOccurrence = _.find(angular_ui_scheduler_occurrences, function (x) {\r\n                                    return (x.value === parseInt(value, 10));\r\n                                });\r\n                                if (!params.yearlyOccurrence || !params.yearlyOccurrence.name) {\r\n                                    throw 'BYSETPOS was not in the tokens of 1,2,3,4,-1';\r\n                                }\r\n                            }\r\n                            else {\r\n                                params.monthlyOccurrence = _.find(angular_ui_scheduler_occurrences, function (x) {\r\n                                    return (x.value === parseInt(value, 10));\r\n                                });\r\n                                if (!params.monthlyOccurrence || !params.monthlyOccurrence.name) {\r\n                                    throw 'BYSETPOS was not in the tokens of 1,2,3,4,-1';\r\n                                }\r\n                            }\r\n                            break;\r\n\r\n                        case 'COUNT':\r\n                            if (parseInt(value, 10)) {\r\n                                params.schedulerEnd = angular_ui_scheduler_endOptions[1];\r\n                                params.schedulerOccurrenceCount = parseInt(value, 10);\r\n                            }\r\n                            else {\r\n                                throw 'COUNT must be a valid integer > 0';\r\n                            }\r\n                            break;\r\n\r\n                        case 'UNTIL':\r\n                            value = normalizeDate(value);\r\n                            params.schedulerEnd = angular_ui_scheduler_endOptions[2];\r\n                            params.schedulerEndDt = new Date(value);\r\n                            break;\r\n\r\n                        case 'BYMONTH':\r\n                            if (getValue(tokens, 'FREQ') === 'YEARLY' && getValue(tokens, 'BYDAY')) {\r\n                                params.yearlRepeatOption = 'other';\r\n                                params.yearlyOtherMonth = _.find(angular_ui_scheduler_months, function (x) {\r\n                                    return x.value === parseInt(value, 10);\r\n                                });\r\n                                if (!params.yearlyOtherMonth || !params.yearlyOtherMonth.name) {\r\n                                    throw 'BYMONTH must be an integer between 1 and 12';\r\n                                }\r\n                            }\r\n                            else {\r\n                                params.yearlyOption = 'month';\r\n                                params.yearlyMonth = _.find(angular_ui_scheduler_months, function (x) {\r\n                                    return x.value === parseInt(value, 10);\r\n                                });\r\n                                if (!params.yearlyMonth || !params.yearlyMonth.name) {\r\n                                    throw 'BYMONTH must be an integer between 1 and 12';\r\n                                }\r\n                            }\r\n                            break;\r\n                        default:\r\n                            $log.warn('rrule key `' + key + '` is invalid');\r\n                    }\r\n                }\r\n\r\n                function validate() {\r\n                    // Check what was put into params vars, and see if anything is\r\n                    // missing or not quite right.\r\n                    if (params.schedulerFrequency.name === 'weekly' && params.weekDays.length === 0) {\r\n                        throw 'Frequency is weekly, but BYDAYS value is missing.';\r\n                    }\r\n                    if (!params.schedulerStartDt) {\r\n                        throw 'Warning: start date was not provided';\r\n                    }\r\n                }\r\n\r\n                if (!rule) {\r\n                    throw 'No rule entered. Provide a valid RRule string.';\r\n                }\r\n\r\n                var tokens = rule.split(/;/);\r\n                if (!angular.isArray(tokens)) {\r\n                    throw 'No rule entered. Provide a valid RRule string.';\r\n                }\r\n\r\n                tokens.forEach(function (token) {\r\n                    setValue(token.split(/=/), tokens);\r\n                });\r\n                validate();\r\n\r\n                return params;\r\n            }\r\n        };\r\n    }]);\r\n"],"sourceRoot":"/source/"}